<div class="homepage">

  <div class="event-preview-container" id="event-preview-container">

    <div class="event-preview cover-style">
      <%= image_tag "hero_library/hero_2.jpg", alt: "Event preview 1" %>
    </div>

    <div class="event-preview cover-style" id="center-card">
      <%= image_tag "hero_library/hero_4.jpg", alt: "Event preview 2" %>
    </div>

    <div class="event-preview cover-style">
      <%= image_tag "hero_library/hero_10.jpg", alt: "Event preview 3" %>
    </div>

  </div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('event-preview-container');
    const cards = container.querySelectorAll('.event-preview');

    if (container && window.innerWidth <= 480) {
      const centerCard = document.getElementById('center-card');
      const scrollPosition = centerCard.offsetLeft - (container.offsetWidth / 2) + (centerCard.offsetWidth / 2);
      container.scrollLeft = scrollPosition;

      function updateCardScales() {
        const containerCenter = container.scrollLeft + container.offsetWidth / 2;
        cards.forEach(card => {
          const cardCenter = card.offsetLeft + card.offsetWidth / 2;
          const distance = Math.abs(containerCenter - cardCenter);
          const maxDistance = container.offsetWidth / 2;

          const scale = Math.max(0.85, 1 - (distance / maxDistance) * 0.15);
          const opacity = Math.max(0.6, 1 - (distance / maxDistance) * 0.4);

          card.style.transform = `scale(${scale})`;
          card.style.opacity = opacity;
        });
      }

      container.addEventListener('scroll', updateCardScales);
      updateCardScales();
    }
  });
</script>

  <h1>Plan events in seconds.</h1>

  <div class="cta-buttons">
    <% unless user_signed_in? %>
      <%= link_to "Login", new_user_session_path, class: "btn btn-primary submit-btn" %>
    <% end %>
    <%= link_to "Discover Events", discover_path, class: "btn btn-primary submit-btn w-50" %>
  </div>

  <p class="intro-text">
    The easiest way to get your guests on the same page.
  </p>

  <p class="sub-text">
    Share with anyone, anywhere.<br>
    Click, RSVP, done.<br>
    See who's going.
  </p>

</div>
