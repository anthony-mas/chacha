<div class="discover-page-container">
  <div class="container pt-4 pb-4">

    <h1 class="discover-title mb-3" style="color: #F5F1E8;">Discover</h1>

    <!-- ============================= -->
    <!-- FILTER BAR -->
    <!-- ============================= -->

    <div class="filter-bar mb-4">
      <div class="filter-scroll-container">

        <!-- LOCATION TAG â€” active ONLY when no filter is selected -->

        <!-- TOP FILTER -->
        <% if params[:filter] == "top" %>
          <%= link_to "Top",
            discover_path,
            class: "filter-tag #{'active' if params[:filter] == 'top'}",
            style: "color: #F5F1E8 !important;" %>
        <% else %>
          <%= link_to "Top",
            discover_path(filter: "top"),
            class: "filter-tag #{'active' if params[:filter] == 'top'}",
            style: "color: #F5F1E8 !important;" %>
        <% end %>


        <!-- CATEGORY FILTERS -->
        <% @categories.each do |category| %>
          <% if params[:filter] == category %>
            <%= link_to category,
              discover_path(),
              class: "filter-tag category-tag #{'active' if params[:filter] == category}",
              style: "color: #F5F1E8 !important;" %>
          <% else %>
            <%= link_to category,
              discover_path(filter: category),
              class: "filter-tag category-tag",
              style: "color: #F5F1E8 !important;" %>
          <% end %>
        <% end %>


      </div>
    </div>

    <!-- ============================= -->
    <!-- EVENTS LIST -->
    <!-- ============================= -->

    <div class="event-cards-list">
      <% if @events.any? %>
        <% @events.each do |event| %>
          <%= render "events/event_card", event: event %>
        <% end %>
      <% else %>
        <p class="no-events-message text-center text-muted p-5" style="color: #F5F1E8;">
          No public events found matching your criteria in <%= @current_location %>.
        </p>
      <% end %>
    </div>

  </div>
</div>
