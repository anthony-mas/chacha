<div class="event-page">

  <div class="event-card-detail">

    <div class="event-hero-image placeholder-box">
      <span class="placeholder-icon">üñºÔ∏è</span>
    </div>

    <div class="event-content-wrapper">

      <header class="event-header">
        <h1 class="centered-title"><%= @event.title.presence ||
"Event" %></h1>

        <div class="event-metadata">
          <p>
            <strong>Date:</strong>
            <%= @event.starts_on %>
            <% if @event.ends_on.present? && @event.ends_on != @event.starts_on %>
              ‚Äì <%= @event.ends_on %>
            <% end %>
          </p>
          <p>
            <strong>Location:</strong> <%= @event.location %>
          </p>
          <p>
            <strong>Private:</strong> <%= @event.event_private ? "Yes" : "No" %>
          </p>
        </div>
      </header>

      <% if user_signed_in? && @event.user == current_user %>
        <section class="event-host-tools">
          <h2>Host tools</h2>

          <p>
            <%= link_to "Edit event", edit_event_path(@event) %> |
<%= link_to "Delete", @event, data: { turbo_method: :delete, turbo_confirm: "Are you sure?"
} %>
          </p>

          <div class="host-actions-buttons">
            <button type="button" class="btn btn-action-large btn-send-blast" disabled>
              <i class="fa-solid fa-bullhorn"></i>
              Send a blast
            </button>
            <%# CRITICAL FIX: Explicitly target share-modal ID %>
            <button type="button" class="btn btn-action-large btn-invite-guests" data-action="click->modal#open" data-modal-id="share-modal">
              <i class="fa-solid fa-share-from-square"></i>
              Invite Guests
            </button>
          </div>
        </section>
      <% end %>

      <section class="event-description">
        <h2>About this event</h2>
        <p><%= @event.description.presence ||
"No description yet." %></p>
      </section>

      <section class="event-main-layout">
        <div class="event-guests-panel">
          <%= render "guests_list", event: @event %>
        </div>

        <div class="event-activity-panel">
          <h2>Activity</h2>
          <p>
            Activity feed (posts, comments, reactions) will appear here.
This will be powered by posts/comments/reactions later.
          </p>
        </div>
      </section>

      <p>
        <%= link_to "Back to my events", events_path %>
      </p>

    </div>
  </div>
</div>

<%# Both modals must have IDs and be present on the page %>
<%= render "events/share_modal", event: @event %>
<%= render "events/manage_guests_modal", event: @event %>
