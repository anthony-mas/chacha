<%= simple_form_for(@event, data: { controller: "event-form" }) do |f| %>
  <%= f.error_notification %>

  <!-- HERO IMAGE PICKER -->
  <div data-controller="hero-library">
    <div class="hero-preview-area" data-hero-library-target="preview">
      <% if @event.hero_image.attached? %>
        <%= image_tag @event.hero_image, class: "hero-image-preview" %>
      <% end %>
    </div>

    <%= f.hidden_field :hero_image_choice,
                       data: { "hero-library-target": "input" } %>

    <!-- Make this button look like the Create Event button -->
    <button type="button"
            class="btn-primary"
            data-action="hero-library#open">
      Choose from library
    </button>

    <%= render "events/hero_library_modal" %>
  </div>


  <!-- TITLE (placeholder instead of label) -->
  <%= f.input :title,
              label: false,
              placeholder: "Your event title",
              input_html: { class: "rounded-input" } %>


  <!-- DESCRIPTION (placeholder instead of label) -->
  <%= f.input :description,
              as: :text,
              label: false,
              placeholder: "Your event description",
              input_html: {
                rows: 8,
                class: "rounded-input"
              } %>


  <!-- CATEGORY (placeholder instead of label) -->
  <%= f.input :category_ids,
              collection: @categories,
              as: :select,
              label: false,
              prompt: "Event category",
              input_html: {
                multiple: false,
                class: "form-select rounded-input"
              } %>


  <!-- LOCATION (Mapbox Autocomplete) -->
  <div class="form-group"
       data-controller="mapbox-autocomplete"
       data-mapbox-autocomplete-api-key-value="<%= ENV['MAPBOX_ACCESS_TOKEN'] %>">

    <!-- Remove label, use placeholder in the injected Mapbox field -->
    <%= f.hidden_field :location,
          data: {
            "mapbox-autocomplete-target": "input",
            placeholder: "Event location"
          } %>

    <div data-mapbox-autocomplete-target="container">
      <div id="mapbox-geocoder-placeholder"></div>
    </div>
  </div>



  <!-- REMOVED STARTS_ON + ENDS_ON -->


  <!-- SETTINGS -->

  <!-- PRIVACY -->
  <div class="settings-card">
    <div class="form-check form-switch">
      <%= f.input_field :event_private,
            as: :boolean,
            class: "form-check-input",
            id: "switchPrivate" %>

      <label class="form-check-label" for="switchPrivate">
        Private event?
      </label>
    </div>
  </div>

  <!-- DISCOVERABILITY -->
  <div class="settings-card">
    <div class="form-check form-switch">
      <%= check_box_tag :discoverable,
            "1",
            false,
            class: "form-check-input",
            id: "switchDiscoverable" %>

      <label class="form-check-label" for="switchDiscoverable">
        Make this event discoverable
      </label>
    </div>
  </div>

  <!-- GUEST APPROVAL -->
  <div class="settings-card">
    <div class="form-check form-switch">
      <%= check_box_tag :require_guest_approval,
            "1",
            false,
            class: "form-check-input",
            id: "switchGuestApproval" %>

      <label class="form-check-label" for="switchGuestApproval">
        Require host approval for new guests
      </label>
    </div>
  </div>


  <!-- SUBMIT -->
  <div>
    <%= f.button :submit, "Create Event", class: "btn-primary" %>
  </div>

<% end %>
