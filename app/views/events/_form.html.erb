<%= simple_form_for(@event, data: { controller: "event-form" }) do |f| %>
  <%= f.error_notification %>

  <%= f.input :title %>

  <%# Description is now a multi-line input (textarea) with additional rows attribute %>
  <%= f.input :description, as: :text, input_html: { rows: 8 } %>

  <%= f.input :category_ids,
              collection: @categories,
              as: :select,
              label: "Category",
              input_html: { multiple: false, class: "form-select" }
              %>

  <%# Location input wired to the new 'geocode' Stimulus controller for autocomplete %>
  <%= f.input :location,
              input_html: {
                data: {
                  controller: "geocode"
                }
              } %>

  <%= f.input :starts_on,
              as: :datetime,
              html5: true,
              input_html: {
                value: f.object.starts_on || Time.now.change(min: 0, sec: 0) + 1.hour,
                data: { "event-form-target": "startsOn", action: "change->event-form#updateEndsOn" }
              }
  %>

  <%= f.input :ends_on,
              as: :datetime,
              html5: true,
              input_html: {
                value: f.object.ends_on || Time.now.change(min: 0, sec: 0) + 2.hours,
                data: { "event-form-target": "endsOn" }
              }
  %>

  <%= f.input :event_private, as: :boolean, label: "Private event?" %>

  <hr>

  <div>
    <h3>Discoverability</h3>
    <label>
      <%= check_box_tag :discoverable, "1" %>
      Make this event discoverable
    </label>
    <p style="font-size: 0.85em; color: #666;">
      (Placeholder option – not yet connected to the database.)
    </p>
  </div>

  <div>
    <h3>Guest approval</h3>
    <label>
      <%= check_box_tag :require_guest_approval, "1" %>
      Require host approval for new guests
    </label>
    <p style="font-size: 0.85em; color: #666;">
      (Placeholder – final behaviour will be added when participation logic is ready.)
    </p>
  </div>

  <div>
    <%= f.button :submit, "Create Event", class: "btn-primary" %>
  </div>
<% end %>
